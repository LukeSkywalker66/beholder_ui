--- CONTEXTO DEL PROYECTO ---
Estructura de archivos aplanada para an√°lisis.


==================================================
ARCHIVO: eslint.config.js
==================================================
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])


==================================================
ARCHIVO: index.html
==================================================
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>beholder_ui</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


==================================================
ARCHIVO: package.json
==================================================
{
  "name": "beholder_ui",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4"
  }
}


==================================================
ARCHIVO: README.md
==================================================
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```


==================================================
ARCHIVO: Roadmap02-12.md
==================================================
Roadmap: **fortalecer la b√∫squeda en el frontend**  **expandir la sincronizaci√≥n en el backend**

---

## üß© Fase 1: B√∫squeda inteligente en el frontend

### üéØ Objetivo
Un solo campo de b√∫squeda que acepte:
- PPPoE
- Nombre de cliente
- Datos parciales
- Ignorando may√∫sculas/min√∫sculas

### üîß Estrategia t√©cnica

#### 1. **Normalizar el input**
```tsx
const normalizar = (texto: string) => texto.trim().toLowerCase();
```

#### 2. **Buscar en m√∫ltiples campos**
En el handler de b√∫squeda, filtr√° contra todos los campos relevantes:

```tsx
const resultados = clientes.filter((c) => {
  const query = normalizar(pppoe);
  return (
    normalizar(c.pppoe).includes(query) ||
    normalizar(c.nombre).includes(query) ||
    normalizar(c.direccion).includes(query)
  );
});
```

#### 3. **Mostrar lista si hay m√∫ltiples resultados**
```tsx
{resultados.length > 1 && (
  <ul className="result-list">
    {resultados.map((cliente) => (
      <li key={cliente.pppoe} onClick={() => setSeleccionado(cliente)}>
        {cliente.nombre} ({cliente.pppoe})
      </li>
    ))}
  </ul>
)}
```

#### 4. **Mantener la lista visible**
- No borr√°s `resultados` al hacer click en un item.
- Solo se borra si se hace click en ‚ÄúBuscar‚Äù o se presiona Enter.

#### 5. **Estilos responsivos**
```css
.result-list {
  margin-top: 0.5rem;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 6px;
  max-height: 200px;
  overflow-y: auto;
}
.result-list li {
  padding: 0.5rem;
  cursor: pointer;
}
.result-list li:hover {
  background-color: #f0f0f0;
}
```

---

## üß© Fase 2: Backend ‚Äì sincronizaci√≥n extendida

### üéØ Objetivo
- Consultar la API de ISPCube para traer tabla de clientes.
- Enriquecer cada cliente con su VLAN desde SmartOLT.
- Guardar todo en tu base local para b√∫squedas r√°pidas.

### üîß Estrategia t√©cnica

#### 1. **Consulta a ISPCube**
```ts
GET https://ispcube.api/clientes
Authorization: Bearer <token>
```

Parse√°s nombre, PPPoE, direcci√≥n, plan, etc.

#### 2. **Consulta a SmartOLT por VLAN**
Por cada cliente con ONU registrada:
```ts
GET https://smartolt.com/api/onu_info?serial=HWTCE56F449D
```

Extra√©s `vlan_id`, `olt_name`, `signal`, etc.

#### 3. **Unificaci√≥n y almacenamiento**
Guard√°s en tu tabla local:
```ts
{
  nombre: "CARPE EMILIA",
  pppoe: "ecarpe",
  direccion: "DEAN FUNES 195 DPTO 1",
  plan: "50Mb",
  vlan: 120,
  olt: "Villa Dolores 2",
  onu_sn: "HWTCE56F449D"
}
```
sumar la api de cnMaestro a la consulta.
En la base de clientes
---

## üß† Ventajas

- La b√∫squeda se vuelve instant√°nea y tolerante a errores.
- El operador puede buscar por lo que tenga a mano.
- La sincronizaci√≥n te permite tener una base local robusta, ideal para escalar.

---




==================================================
ARCHIVO: TODO_EL_PROYECTO.txt
==================================================


==================================================
ARCHIVO: TODO_EL_PROYECTO2.txt
==================================================
--- CONTEXTO DEL PROYECTO ---
Estructura de archivos aplanada para an√°lisis.


==================================================
ARCHIVO: eslint.config.js
==================================================
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      js.configs.recommended,
      tseslint.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
  },
])


==================================================
ARCHIVO: index.html
==================================================
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>beholder_ui</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


==================================================
ARCHIVO: package.json
==================================================
{
  "name": "beholder_ui",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/node": "^24.10.1",
    "@types/react": "^19.2.5",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "typescript": "~5.9.3",
    "typescript-eslint": "^8.46.4",
    "vite": "^7.2.4"
  }
}


==================================================
ARCHIVO: README.md
==================================================
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```


==================================================
ARCHIVO: Roadmap02-12.md
==================================================
Roadmap: **fortalecer la b√∫squeda en el frontend**  **expandir la sincronizaci√≥n en el backend**

---

## üß© Fase 1: B√∫squeda inteligente en el frontend

### üéØ Objetivo
Un solo campo de b√∫squeda que acepte:
- PPPoE
- Nombre de cliente
- Datos parciales
- Ignorando may√∫sculas/min√∫sculas

### üîß Estrategia t√©cnica

#### 1. **Normalizar el input**
```tsx
const normalizar = (texto: string) => texto.trim().toLowerCase();
```

#### 2. **Buscar en m√∫ltiples campos**
En el handler de b√∫squeda, filtr√° contra todos los campos relevantes:

```tsx
const resultados = clientes.filter((c) => {
  const query = normalizar(pppoe);
  return (
    normalizar(c.pppoe).includes(query) ||
    normalizar(c.nombre).includes(query) ||
    normalizar(c.direccion).includes(query)
  );
});
```

#### 3. **Mostrar lista si hay m√∫ltiples resultados**
```tsx
{resultados.length > 1 && (
  <ul className="result-list">
    {resultados.map((cliente) => (
      <li key={cliente.pppoe} onClick={() => setSeleccionado(cliente)}>
        {cliente.nombre} ({cliente.pppoe})
      </li>
    ))}
  </ul>
)}
```

#### 4. **Mantener la lista visible**
- No borr√°s `resultados` al hacer click en un item.
- Solo se borra si se hace click en ‚ÄúBuscar‚Äù o se presiona Enter.

#### 5. **Estilos responsivos**
```css
.result-list {
  margin-top: 0.5rem;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 6px;
  max-height: 200px;
  overflow-y: auto;
}
.result-list li {
  padding: 0.5rem;
  cursor: pointer;
}
.result-list li:hover {
  background-color: #f0f0f0;
}
```

---

## üß© Fase 2: Backend ‚Äì sincronizaci√≥n extendida

### üéØ Objetivo
- Consultar la API de ISPCube para traer tabla de clientes.
- Enriquecer cada cliente con su VLAN desde SmartOLT.
- Guardar todo en tu base local para b√∫squedas r√°pidas.

### üîß Estrategia t√©cnica

#### 1. **Consulta a ISPCube**
```ts
GET https://ispcube.api/clientes
Authorization: Bearer <token>
```

Parse√°s nombre, PPPoE, direcci√≥n, plan, etc.

#### 2. **Consulta a SmartOLT por VLAN**
Por cada cliente con ONU registrada:
```ts
GET https://smartolt.com/api/onu_info?serial=HWTCE56F449D
```

Extra√©s `vlan_id`, `olt_name`, `signal`, etc.

#### 3. **Unificaci√≥n y almacenamiento**
Guard√°s en tu tabla local:
```ts
{
  nombre: "CARPE EMILIA",
  pppoe: "ecarpe",
  direccion: "DEAN FUNES 195 DPTO 1",
  plan: "50Mb",
  vlan: 120,
  olt: "Villa Dolores 2",
  onu_sn: "HWTCE56F449D"
}
```

---

## üß† Ventajas

- La b√∫squeda se vuelve instant√°nea y tolerante a errores.
- El operador puede buscar por lo que tenga a mano.
- La sincronizaci√≥n te permite tener una base local robusta, ideal para escalar.

---

Puedo ayudarte a definir el esquema de la tabla local, los endpoints de sincronizaci√≥n, o incluso un cron para actualizar cada noche. ¬øQuer√©s que empecemos por el dise√±o de la tabla `clientes` en tu base local?


==================================================
ARCHIVO: TODO_EL_PROYECTO.txt
==================================================


==================================================
ARCHIVO: tsconfig.app.json
==================================================
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}


==================================================
ARCHIVO: tsconfig.json
==================================================
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}


==================================================
ARCHIVO: tsconfig.node.json
==================================================
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}


==================================================
ARCHIVO: vite.config.ts
==================================================
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': 'http://localhost:8500'
    }
  }
})


==================================================
ARCHIVO: src\App.css
==================================================
.layout {
  display: flex;
  min-height: 100vh;
  font-family: Arial, sans-serif;
}

/* Panel izquierdo */
.sidebar {
  width: 300px;
  background-color: #f5f5f5;
  padding: 2rem;
  text-align: center;
  box-shadow: 2px 0 5px rgba(0,0,0,0.1);
}

.logo-sidebar {
  width: 220px;
  height: auto;
  margin-bottom: 1rem;
}

.sidebar h1 {
  font-size: 2rem;
  margin: 0.5rem 0;
}

.sidebar h2 {
  font-size: 1rem;
  color: #666;
  margin-bottom: 2rem;
}

/* Panel derecho */
.results {
  flex: 1;
  padding: 2rem;
  background-color: #ffffff;
}

/* Grilla de resultados */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
}

.cell {
  background-color: #eaeaea;
  padding: 1rem;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
  margin-top: 1rem;
}

.cell {
  background-color: #f0f0f0;
  padding: 1rem;
  border-radius: 6px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}

.estado-ok {
  background-color: #d4f4dd;
  border-left: 6px solid #2ecc71;
}

.estado-error {
  background-color: #fbe3e3;
  border-left: 6px solid #e74c3c;
}
.cell.span-2 {
  grid-column: span 2;
}
.header-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.diagnostic-title {
  font-size: 1.25rem;
  font-weight: bold;
  margin: 0;
}

.copy-button button {
  background-color: #4a90e2;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.copy-button button:hover {
  background-color: #357ab8;
}
@media (prefers-color-scheme: dark) {
  body {
    background-color: #1e1e1e;
    color: #f0f0f0;
  }

  .sidebar {
    background-color: #2c2c2c;
    color: #f0f0f0;
  }

  .results {
    background-color: #1e1e1e;
    color: #f0f0f0;
  }

  .cell {
    background-color: #333;
    color: #f0f0f0;
  }

  .estado-ok {
    background-color: #2e7d32;
    color: #ffffff;
  }

  .estado-error {
    background-color: #c62828;
    color: #ffffff;
  }

  .copy-button button {
    background-color: #90caf9;
    color: #000;
  }

  .copy-button button:hover {
    background-color: #64b5f6;
  }
}
body.dark-mode {
  background-color: #1e1e1e;
  color: #f0f0f0;
}
@media (max-width: 768px) {
  .layout {
    flex-direction: column;
  }

  .sidebar {
    width: 100%;
    box-shadow: none;
    text-align: left;
    padding: 1rem;
  }

  .results {
    padding: 1rem;
  }

  .grid {
    grid-template-columns: 1fr; /* una sola columna en m√≥viles */
  }

  .cell.span-2 {
    grid-column: span 1;
  }
}

==================================================
ARCHIVO: src\App.tsx
==================================================
import { useState } from "react";
import SearchBox from "./components/SearchBox";
import OutputBox from "./components/OutputBox";
import './App.css';
import logo from './assets/beholder2.png';

function App() {
  const [resultData, setResultData] = useState<any>(null);

  return (
    <div className="layout">
      {/* Panel izquierdo */}
      <aside className="sidebar">
        <img src={logo} alt="Logo Beholder" className="logo-sidebar" />
        <h1>Beholder</h1>
        <h2>Diagn√≥stico centralizado de 2F Internet</h2>
        <SearchBox onResult={setResultData} />
      </aside>

      {/* Panel derecho */}
      <main className="results">
        {resultData && <OutputBox data={resultData} />}
      </main>
    </div>
  );
}

export default App;

==================================================
ARCHIVO: src\index.css
==================================================
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgb(255, 255, 255);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
}


==================================================
ARCHIVO: src\main.tsx
==================================================
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)


==================================================
ARCHIVO: src\components\CopyButton.tsx
==================================================
import { useState } from "react";

interface CopyButtonProps {
  text: string; // el texto que quer√©s copiar
}

export default function CopyButton({ text }: CopyButtonProps) {
  const [copied, setCopied] = useState(false);

  const copyToClipboard = async () => {
    console.log("Click detectado, texto:", text);
    try {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        // ‚úÖ Camino moderno (HTTPS / localhost)
        await navigator.clipboard.writeText(text);
        console.log("Camino moderno (HTTPS / localhost) usado para copiar al portapapeles.");
      } else {
        // ‚úÖ Fallback para HTTP inseguro
        const textarea = document.createElement("textarea");
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand("copy");
        document.body.removeChild(textarea);
        console.log("Fallback usado para copiar al portapapeles.");
      }

      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error("Error copiando al portapapeles", err);
    }
  };


  return (
    <div className="copy-button">
      <button onClick={copyToClipboard}>
        üìã Copiar
      </button>
      {copied && <span style={{ marginLeft: "8px" }}>‚úî Copiado</span>}
    </div>
  );

}

==================================================
ARCHIVO: src\components\OutputBox.tsx
==================================================

import CopyButton from "./CopyButton";

interface OutputBoxProps {
  data: any;
}

export default function OutputBox({ data }: OutputBoxProps) {
  const traducciones: Record<string, string> = {
    Online: "En l√≠nea",
    "Power fail": "Problema de energ√≠a",
    LOS: "Sin se√±al/sin luz",
    Offline: "Fuera de l√≠nea",
    true: "Conectado",
    false: "Desconectado",
    Critical: "Cr√≠tico - Luz muy alta",
    Warning: "Advertencia - Luz alta",
    "Very good": "Muy buena - Luz √≥ptima",
  };

  // Texto plano para copiar
  const outputText = `
    Cliente: ${data?.mikrotik?.comment ?? "-"}
    Domicilio: ${data?.direccion ?? "-"}
    Plan: ${data?.plan ?? "-"}
    Nodo: ${data?.nodo_nombre ? data.nodo_nombre + " - " + (data?.nodo_ip ?? "-") : "-"}
    OLT: ${data?.OLT ?? "-"}
    PPPoE User: ${data?.pppoe_username ?? "-"}
    Estado PPPoE: ${traducciones[data?.mikrotik?.active] ?? "-"}
    Tiempo activo: ${data?.mikrotik?.uptime ?? "-"}
    √öltima conexi√≥n: ${data?.mikrotik?.secret?.["last-logged-out"] ?? "-"}
    ONU s/n: ${data?.onu_sn ?? "-"}
    ONU Estado: ${traducciones[data?.onu_status_smrt?.onu_status] ?? "-"}
    ONU √öltimo cambio de estado: ${data?.onu_status_smrt?.last_status_change ?? "-"}
    ONU Se√±al: ${traducciones[data?.onu_signal_smrt?.onu_signal] ?? "-"}
    ONU Se√±al Detalle: ${data?.onu_signal_smrt?.onu_signal_value ?? "-"}
    `;

  return (
    <div className="border rounded p-4 mt-4 bg-gray-50">
      <div className="header-row">
        <h3 className="diagnostic-title">Diagn√≥stico normalizado</h3>
        <CopyButton text={outputText} />
      </div>
      <div className="bg-white p-2 rounded font-mono whitespace-pre-wrap">
      <div className="grid">
        <div className="cell span-2"><strong>Cliente:</strong> {data?.mikrotik?.comment ?? "-"}</div>
        <div className="cell span-2"><strong>Domicilio:</strong> {data?.direccion ?? "-"}</div>
        <div className="cell"><strong>Plan:</strong> {data?.plan ?? "-"}</div>
        <div className="cell"><strong>Nodo:</strong> {data?.nodo_nombre ? data.nodo_nombre + " - " + (data?.nodo_ip ?? "-") : "-"}</div>
        <div className="cell"><strong>OLT:</strong> {data?.OLT ?? "-"}</div>
        <div className={`cell ${data?.mikrotik?.active ? "estado-ok" : "estado-error"}`}>
          <strong>Estado PPPoE:</strong> {traducciones[data?.mikrotik?.active] ?? "-"}
        </div>
        <div className="cell"><strong>Tiempo activo:</strong> {data?.mikrotik?.uptime ?? "-"}</div>
        <div className="cell"><strong>√öltima conexi√≥n:</strong> {data?.mikrotik?.secret?.["last-logged-out"] ?? "-"}</div>
        <div className="cell"><strong>ONU s/n:</strong> {data?.onu_sn ?? "-"}</div>
        <div className={`cell ${data?.onu_status_smrt?.onu_status === "Online" ? "estado-ok" : "estado-error"}`}>
          <strong>ONU Estado:</strong> {traducciones[data?.onu_status_smrt?.onu_status] ?? "-"}
        </div>
        <div className="cell"><strong>√öltimo cambio de estado:</strong> {data?.onu_status_smrt?.last_status_change ?? "-"}</div>
        <div className="cell"><strong>ONU Se√±al:</strong> {traducciones[data?.onu_signal_smrt?.onu_signal] ?? "-"}</div>
        <div className="cell"><strong>Se√±al Detalle:</strong> {data?.onu_signal_smrt?.onu_signal_value ?? "-"}</div>
        </div>
      </div>
      <CopyButton text={outputText} />
    </div>
  );
}

==================================================
ARCHIVO: src\components\SearchBox.tsx
==================================================
import { useState } from "react";

export default function SearchBox({ onResult }: { onResult: (data: any) => void }) {
  const [pppoe, setPppoe] = useState("");
  const [error, setError] = useState<string | null>(null);
  const [loading, setLoading] = useState(false);

  const handleSearch = async () => {
    setLoading(true);
    setError(null);

    try {
      const resp = await fetch(
        `${import.meta.env.VITE_API_URL}/diagnosis/${pppoe}`,
        {
          headers: {
            "x-api-key": import.meta.env.VITE_API_KEY,
          },
        }
      );

      if (!resp.ok) {
        throw new Error(`Error ${resp.status}: ${resp.statusText}`);
      }

      const json = await resp.json();
      onResult(json); // enviar resultado al padre
    } catch (err: any) {
      setError(err.message);
      onResult(null); // limpiar resultado si hay error
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="p-4">
      <input
        type="text"
        value={pppoe}
        onChange={(e) => setPppoe(e.target.value)}
        onKeyDown={(e) => {
          if (e.key === "Enter") {
            handleSearch();
          }
        }}
        placeholder="Ingrese PPPoE"
        className="border px-2 py-1 mr-2"
      />
      <button
        onClick={handleSearch}
        className="bg-blue-600 text-white px-3 py-1 rounded"
      >
        Buscar
      </button>

      {loading && <p>Buscando...</p>}
      {error && <p className="text-red-600">Error: {error}</p>}
    </div>
  );
}


==================================================
ARCHIVO: tsconfig.app.json
==================================================
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2022",
    "useDefineForClassFields": true,
    "lib": ["ES2022", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "types": ["vite/client"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}


==================================================
ARCHIVO: tsconfig.json
==================================================
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}


==================================================
ARCHIVO: tsconfig.node.json
==================================================
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2023",
    "lib": ["ES2023"],
    "module": "ESNext",
    "types": ["node"],
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}


==================================================
ARCHIVO: vite.config.ts
==================================================
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': 'http://localhost:8500'
    }
  }
})


==================================================
ARCHIVO: src\App.css
==================================================
.layout {
  display: flex;
  min-height: 100vh;
  font-family: Arial, sans-serif;
}

/* Panel izquierdo */
.sidebar {
  width: 300px;
  background-color: #f5f5f5;
  padding: 2rem;
  text-align: center;
  box-shadow: 2px 0 5px rgba(0,0,0,0.1);
}

.logo-sidebar {
  width: 220px;
  height: auto;
  margin-bottom: 1rem;
}

.sidebar h1 {
  font-size: 2rem;
  margin: 0.5rem 0;
}

.sidebar h2 {
  font-size: 1rem;
  color: #666;
  margin-bottom: 2rem;
}

/* Panel derecho */
.results {
  flex: 1;
  padding: 2rem;
  background-color: #ffffff;
}

/* Grilla de resultados */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
}

.cell {
  background-color: #eaeaea;
  padding: 1rem;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 1rem;
  margin-top: 1rem;
}

.cell {
  background-color: #f0f0f0;
  padding: 1rem;
  border-radius: 6px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}

.estado-ok {
  background-color: #d4f4dd;
  border-left: 6px solid #2ecc71;
}

.estado-error {
  background-color: #fbe3e3;
  border-left: 6px solid #e74c3c;
}
.cell.span-2 {
  grid-column: span 2;
}
.header-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.diagnostic-title {
  font-size: 1.25rem;
  font-weight: bold;
  margin: 0;
}

.copy-button button {
  background-color: #4a90e2;
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.copy-button button:hover {
  background-color: #357ab8;
}
@media (prefers-color-scheme: dark) {
  body {
    background-color: #1e1e1e;
    color: #f0f0f0;
  }

  .sidebar {
    background-color: #2c2c2c;
    color: #f0f0f0;
  }

  .results {
    background-color: #1e1e1e;
    color: #f0f0f0;
  }

  .cell {
    background-color: #333;
    color: #f0f0f0;
  }

  .estado-ok {
    background-color: #2e7d32;
    color: #ffffff;
  }

  .estado-error {
    background-color: #c62828;
    color: #ffffff;
  }

  .copy-button button {
    background-color: #90caf9;
    color: #000;
  }

  .copy-button button:hover {
    background-color: #64b5f6;
  }
}
body.dark-mode {
  background-color: #1e1e1e;
  color: #f0f0f0;
}
@media (max-width: 768px) {
  .layout {
    flex-direction: column;
  }

  .sidebar {
    width: 100%;
    box-shadow: none;
    text-align: left;
    padding: 1rem;
  }

  .results {
    padding: 1rem;
  }

  .grid {
    grid-template-columns: 1fr; /* una sola columna en m√≥viles */
  }

  .cell.span-2 {
    grid-column: span 1;
  }
}

==================================================
ARCHIVO: src\App.tsx
==================================================
import { useState } from "react";
import SearchBox from "./components/SearchBox";
import OutputBox from "./components/OutputBox";
import './App.css';
import logo from './assets/beholder2.png';

function App() {
  const [resultData, setResultData] = useState<any>(null);

  return (
    <div className="layout">
      {/* Panel izquierdo */}
      <aside className="sidebar">
        <img src={logo} alt="Logo Beholder" className="logo-sidebar" />
        <h1>Beholder</h1>
        <h2>Diagn√≥stico centralizado de 2F Internet</h2>
        <SearchBox onResult={setResultData} />
      </aside>

      {/* Panel derecho */}
      <main className="results">
        {resultData && <OutputBox data={resultData} />}
      </main>
    </div>
  );
}

export default App;

==================================================
ARCHIVO: src\index.css
==================================================
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgb(255, 255, 255);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
}


==================================================
ARCHIVO: src\main.tsx
==================================================
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)


==================================================
ARCHIVO: src\components\CopyButton.tsx
==================================================
import { useState } from "react";

interface CopyButtonProps {
  text: string; // el texto que quer√©s copiar
}

export default function CopyButton({ text }: CopyButtonProps) {
  const [copied, setCopied] = useState(false);

  const copyToClipboard = async () => {
    console.log("Click detectado, texto:", text);
    try {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        // ‚úÖ Camino moderno (HTTPS / localhost)
        await navigator.clipboard.writeText(text);
        console.log("Camino moderno (HTTPS / localhost) usado para copiar al portapapeles.");
      } else {
        // ‚úÖ Fallback para HTTP inseguro
        const textarea = document.createElement("textarea");
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand("copy");
        document.body.removeChild(textarea);
        console.log("Fallback usado para copiar al portapapeles.");
      }

      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error("Error copiando al portapapeles", err);
    }
  };


  return (
    <div className="copy-button">
      <button onClick={copyToClipboard}>
        üìã Copiar
      </button>
      {copied && <span style={{ marginLeft: "8px" }}>‚úî Copiado</span>}
    </div>
  );

}

==================================================
ARCHIVO: src\components\OutputBox.tsx
==================================================

import CopyButton from "./CopyButton";

interface OutputBoxProps {
  data: any;
}

export default function OutputBox({ data }: OutputBoxProps) {
  const traducciones: Record<string, string> = {
    Online: "En l√≠nea",
    "Power fail": "Problema de energ√≠a",
    LOS: "Sin se√±al/sin luz",
    Offline: "Fuera de l√≠nea",
    true: "Conectado",
    false: "Desconectado",
    Critical: "Cr√≠tico - Luz muy alta",
    Warning: "Advertencia - Luz alta",
    "Very good": "Muy buena - Luz √≥ptima",
  };

  // Texto plano para copiar
  const outputText = `
    Cliente: ${data?.cliente_nombre ?? "-"}
    Domicilio: ${data?.direccion ?? "-"}
    Plan: ${data?.plan ?? "-"}
    Nodo: ${data?.nodo_nombre ? data.nodo_nombre + " - " + (data?.nodo_ip ?? "-") : "-"}
    OLT: ${data?.OLT ?? "-"}
    PPPoE User: ${data?.pppoe_username ?? "-"}
    Estado PPPoE: ${traducciones[data?.mikrotik?.active] ?? "-"}
    Tiempo activo: ${data?.mikrotik?.uptime ?? "-"}
    √öltima conexi√≥n: ${data?.mikrotik?.secret?.["last-logged-out"] ?? "-"}
    ONU s/n: ${data?.onu_sn ?? "-"}
    ONU Estado: ${traducciones[data?.onu_status_smrt?.onu_status] ?? "-"}
    ONU √öltimo cambio de estado: ${data?.onu_status_smrt?.last_status_change ?? "-"}
    ONU Se√±al: ${traducciones[data?.onu_signal_smrt?.onu_signal] ?? "-"}
    ONU Se√±al Detalle: ${data?.onu_signal_smrt?.onu_signal_value ?? "-"}
    `;

  return (
    <div className="border rounded p-4 mt-4 bg-gray-50">
      <div className="header-row">
        <h3 className="diagnostic-title">Diagn√≥stico normalizado</h3>
        <CopyButton text={outputText} />
      </div>
      <div className="bg-white p-2 rounded font-mono whitespace-pre-wrap">
      <div className="grid">
        <div className="cell span-2"><strong>Cliente:</strong> {data?.cliente_nombre ?? "-"}</div>
        <div className="cell span-2"><strong>Domicilio:</strong> {data?.direccion ?? "-"}</div>
        <div className="cell"><strong>Plan:</strong> {data?.plan ?? "-"}</div>
        <div className="cell"><strong>Nodo:</strong> {data?.nodo_nombre ? data.nodo_nombre + " - " + (data?.nodo_ip ?? "-") : "-"}</div>
        <div className="cell"><strong>OLT:</strong> {data?.OLT ?? "-"}</div>
        <div className={`cell ${data?.mikrotik?.active ? "estado-ok" : "estado-error"}`}>
          <strong>Estado PPPoE:</strong> {traducciones[data?.mikrotik?.active] ?? "-"}
        </div>
        <div className="cell"><strong>Tiempo activo:</strong> {data?.mikrotik?.uptime ?? "-"}</div>
        <div className="cell"><strong>√öltima conexi√≥n:</strong> {data?.mikrotik?.secret?.["last-logged-out"] ?? "-"}</div>
        <div className="cell"><strong>ONU s/n:</strong> {data?.onu_sn ?? "-"}</div>
        <div className={`cell ${data?.onu_status_smrt?.onu_status === "Online" ? "estado-ok" : "estado-error"}`}>
          <strong>ONU Estado:</strong> {traducciones[data?.onu_status_smrt?.onu_status] ?? "-"}
        </div>
        <div className="cell"><strong>√öltimo cambio de estado:</strong> {data?.onu_status_smrt?.last_status_change ?? "-"}</div>
        <div className="cell"><strong>ONU Se√±al:</strong> {traducciones[data?.onu_signal_smrt?.onu_signal] ?? "-"}</div>
        <div className="cell"><strong>Se√±al Detalle:</strong> {data?.onu_signal_smrt?.onu_signal_value ?? "-"}</div>
        </div>
        
      </div>
      <CopyButton text={outputText} />
    </div>
    //luego agregar los demas campos de datos de cliente
  );
}

==================================================
ARCHIVO: src\components\SearchBox.tsx
==================================================
import { useState } from "react";

export default function SearchBox({ onResult }: { onResult: (data: any) => void }) {
  const [pppoe, setPppoe] = useState("");
  const [error, setError] = useState<string | null>(null);
  const [loading, setLoading] = useState(false);

  const handleSearch = async () => {
    setLoading(true);
    setError(null);

    try {
      const resp = await fetch(
        `${import.meta.env.VITE_API_URL}/diagnosis/${pppoe}`,
        {
          headers: {
            "x-api-key": import.meta.env.VITE_API_KEY,
          },
        }
      );

      if (!resp.ok) {
        throw new Error(`Error ${resp.status}: ${resp.statusText}`);
      }

      const json = await resp.json();
      onResult(json); // enviar resultado al padre
    } catch (err: any) {
      setError(err.message);
      onResult(null); // limpiar resultado si hay error
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="p-4">
      <input
        type="text"
        value={pppoe}
        onChange={(e) => setPppoe(e.target.value)}
        onKeyDown={(e) => {
          if (e.key === "Enter") {
            handleSearch();
          }
        }}
        placeholder="Ingrese PPPoE"
        className="border px-2 py-1 mr-2"
      />
      <button
        onClick={handleSearch}
        className="bg-blue-600 text-white px-3 py-1 rounded"
      >
        Buscar
      </button>

      {loading && <p>Buscando...</p>}
      {error && <p className="text-red-600">Error: {error}</p>}
    </div>
  );
}
